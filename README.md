# ChainBoy

Описание проекта: сеть из пользовательских суперлегких нод, которая следит за событиями в поддерживаемых blockhain-сетях(где есть контракты сети) и исполняет задания других пользователей из смарт-контрактов, позволяя вынести тяжелые вычисления доказуемо децентрализованно из offchain в onchain и доказуемо децентрализованно осуществлять перенос информации из offchain в onchain(получать курсы валют, информацию из API, случайные числа, ...).

Флоу пользователя:
- загружает нужный для исполнения код в ipfs
- создает в поддерживаемой блокчейн-сети заявку на исполнения кода с заданными input-параметрами(в перспективе - и ценой исполнения)
- получает результат исполнения кода в свой контракт с весами количества токенов выполнивших код

Консенсус:
- консенсус происходит на базе смарт-контракта в сети siberium. у каждой ноды есть свой адрес, чтобы стать нодой нужно иметь токены проекта.

Флоу ноды:
- нода имеет свой адрес и токены проекта
- на сервере или в рамках serverless-функции поднимается скрипт ноды
- сервис нотификаций об event'ах со смарт-контракта в поддерживаемой сети триггерит ноду, когда объявлено новое задание от пользователя
- нода выполняет функцию, публикует результат, подписанный своим ключом, в смарт-контракте консенсуса в основной сети(siberium)
- в смарт-контракте собираются результаты разных нод, находится консенсус согласно большинству токенов, которыми владеют ноды
- собирается master-результат с доказательством консенсуса(результаты, количество токенов), публикуется в контракте
- нодам начисляются награды эквивалентно правильности решения(соответствия консенсусу) и по скорости
- *экономика*:
  - первая и вторая ноды решившие как большинство получают по 15% от цены юзера (итого 30%)
  - остальные получают 50% цены юзера деленное на количество токенов владения
  - 20% остаются на контракте
- результат пользователь вносит самостоятельно в нужный ему чейн(или это делает отдельный сервис за допнаграду) на контракт проекта
- распределение токенов среди разных адресов нод обновляется во всех поддерживаемых сетях регулярно(2 раза в сутки при наличии обновлений)


Структура:
- смарт-контракт в основной сети проекта
- смарт-контракты в дополнительных сетях
- нода (docker-compose: main node python script, python sandbox https://github.com/StepicOrg/epicbox)
  - server-based нода подписывается на ивенты смарт-контрактов через сервис нотификации об уведомлениях https://ipn.tools
  - для serverless необходимо создать вебхуки по ивентам
